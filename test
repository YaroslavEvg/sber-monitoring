                                def jsonBody = body.toString()
                                def encodedJson = java.net.URLEncoder.encode(jsonBody, "UTF-8")
                                response = httpRequest(
                                    url: "${params.URL_AGENT}/api/v3/projects/add?json=${encodedJson}",
                                    httpMode: 'POST',
                                    authentication: params.TUZ,
                                    customHeaders: [
                                        [name: 'Content-Type', value: 'multipart/form-data']
                                    ],
                                    uploadFile: uploadFile,
                                    timeout: myTimeout / retryCount * 2,
                                    multipartName: 'file',
                                    validResponseCodes: '200:299',
                                    consoleLogResponseBody: true,
                                    ignoreSslErrors: true
                                )
def send_request(params, body, upload_file, my_timeout, retry_count):
    # Преобразуем тело запроса в строку и URL-кодируем её
    json_body = str(body)
    encoded_json = urllib.parse.quote_plus(json_body, encoding='utf-8')

    # Формируем полный URL с параметром json
    url = f"{params['URL_AGENT']}/api/v3/projects/add?json={encoded_json}"

    # Устанавливаем базовые параметры запроса
    with open(upload_file, 'rb') as file_handle:
        files = {'file': ('filename.ext', file_handle)}  # Тут filename.ext - имя файла, можно задать произвольно

        # Делаем запрос
        try:
            response = requests.post(
                url=url,
                auth=(params['TUZ']['username'], params['TUZ']['password']),  # Аутентификация
                headers={'Content-Type': 'multipart/form-data'},  # Заголовок multipart/form-data
                files=files,  # Файл для загрузки
                timeout=my_timeout / retry_count * 2,  # Заданный вами таймаут
                verify=False  # Игнорирование SSL ошибок
            )
